{"ast":null,"code":"var _jsxFileName = \"/Users/alf/DAO-Interface/src/pages/DAO.js\",\n    _s = $RefreshSig$();\n\n// src/components/DAO.js\nimport React, { useContext, useEffect, useState } from 'react';\nimport { ethers } from 'ethers';\nimport { AppContext } from '../context/AppContext';\nimport OracleABI from '../utils/abis/Oracle_ABI.json'; // Ensure the path is correct and file name matches\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst contractAddress = '0xE62a3277429B9F26C466D31157D50CaE97561e7C';\n\nconst DAO = () => {\n  _s();\n\n  const {\n    currentAccount,\n    networkProvider\n  } = useContext(AppContext);\n  const [daoContract, setDaoContract] = useState(null);\n  const [stakedAmount, setStakedAmount] = useState('0');\n  const [additionalStake, setAdditionalStake] = useState('');\n  const [withdrawAmount, setWithdrawAmount] = useState('');\n  const [totalProposalFees, setTotalProposalFees] = useState('0');\n  const [totalRequestFees, setTotalRequestFees] = useState('0');\n  useEffect(() => {\n    if (networkProvider && currentAccount) {\n      const signer = networkProvider.getSigner();\n      const contract = new ethers.Contract(contractAddress, OracleABI, signer);\n      setDaoContract(contract);\n      fetchStakedAmount(contract, currentAccount);\n      fetchFees(contract);\n    }\n  }, [networkProvider, currentAccount]);\n\n  const fetchStakedAmount = async (contract, account) => {\n    try {\n      const amount = await contract.stakes(account);\n      setStakedAmount(ethers.utils.formatEther(amount));\n    } catch (error) {\n      console.error('Failed to fetch staked amount:', error);\n    }\n  };\n\n  const fetchFees = async contract => {\n    try {\n      const proposalFees = await contract.totalProposalFeesCollected();\n      const requestFees = await contract.totalRequestFeesCollected();\n      setTotalProposalFees(ethers.utils.formatEther(proposalFees));\n      setTotalRequestFees(ethers.utils.formatEther(requestFees));\n    } catch (error) {\n      console.error('Failed to fetch fees:', error);\n    }\n  };\n\n  const joinDAO = async () => {\n    if (!daoContract) return;\n\n    try {\n      const txResponse = await daoContract.joinDAO({\n        value: ethers.utils.parseEther(\"10\")\n      });\n      await txResponse.wait();\n      alert('Successfully joined DAO!');\n      fetchStakedAmount(daoContract, currentAccount);\n      fetchFees(daoContract);\n    } catch (error) {\n      console.error('Failed to join DAO:', error);\n      alert('Error joining DAO');\n    }\n  };\n\n  const addStake = async () => {\n    if (!daoContract || !additionalStake) return;\n\n    try {\n      const txResponse = await daoContract.addStake({\n        value: ethers.utils.parseEther(additionalStake)\n      });\n      await txResponse.wait();\n      alert('Successfully added stake!');\n      fetchStakedAmount(daoContract, currentAccount);\n      fetchFees(daoContract);\n      setAdditionalStake('');\n    } catch (error) {\n      console.error('Failed to add stake:', error);\n      alert('Error adding stake');\n    }\n  };\n\n  const withdrawStake = async () => {\n    if (!daoContract || !withdrawAmount) return;\n\n    try {\n      const txResponse = await daoContract.leaveDAO(ethers.utils.parseEther(withdrawAmount));\n      await txResponse.wait();\n      alert('Successfully withdrawn stake!');\n      fetchStakedAmount(daoContract, currentAccount);\n      setWithdrawAmount('');\n    } catch (error) {\n      console.error('Failed to withdraw stake:', error);\n      alert('Error withdrawing stake');\n    }\n  };\n\n  const walletConnectButtonStyle = {\n    backgroundColor: '#3b82f6',\n    color: 'white',\n    border: 'none',\n    padding: '10px 20px',\n    borderRadius: '12px',\n    cursor: 'pointer',\n    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n    fontWeight: '600',\n    fontSize: '16px'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"DAO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: joinDAO,\n        style: walletConnectButtonStyle,\n        children: \"Join DAO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#1a202c',\n          color: 'white',\n          padding: '20px',\n          borderRadius: '8px',\n          marginBottom: '10px',\n          flex: '1 1 calc(33.333% - 20px)',\n          margin: '10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Staked Amount: \", stakedAmount, \" TPLANQ\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#1a202c',\n          color: 'white',\n          padding: '20px',\n          borderRadius: '8px',\n          marginBottom: '10px',\n          flex: '1 1 calc(33.333% - 20px)',\n          margin: '10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total Proposal Fees Collected: \", totalProposalFees, \" TPLANQ\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: '#1a202c',\n          color: 'white',\n          padding: '20px',\n          borderRadius: '8px',\n          marginBottom: '10px',\n          flex: '1 1 calc(33.333% - 20px)',\n          margin: '10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total Request Fees Collected: \", totalRequestFees, \" TPLANQ\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#1a202c',\n        padding: '20px',\n        borderRadius: '8px',\n        marginBottom: '10px',\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: additionalStake,\n        onChange: e => setAdditionalStake(e.target.value),\n        placeholder: \"Amount to stake (TPLANQ)\",\n        style: {\n          flex: '1',\n          marginRight: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addStake,\n        children: \"Add Stake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#1a202c',\n        padding: '20px',\n        borderRadius: '8px',\n        marginBottom: '10px',\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: withdrawAmount,\n        onChange: e => setWithdrawAmount(e.target.value),\n        placeholder: \"Amount to unstake (TPLANQ)\",\n        style: {\n          flex: '1',\n          marginRight: '10px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: withdrawStake,\n        children: \"Withdraw Stake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DAO, \"knJWlcPDuzSP4syAax4/QUHB4PI=\");\n\n_c = DAO;\nexport default DAO;\n\nvar _c;\n\n$RefreshReg$(_c, \"DAO\");","map":{"version":3,"sources":["/Users/alf/DAO-Interface/src/pages/DAO.js"],"names":["React","useContext","useEffect","useState","ethers","AppContext","OracleABI","contractAddress","DAO","currentAccount","networkProvider","daoContract","setDaoContract","stakedAmount","setStakedAmount","additionalStake","setAdditionalStake","withdrawAmount","setWithdrawAmount","totalProposalFees","setTotalProposalFees","totalRequestFees","setTotalRequestFees","signer","getSigner","contract","Contract","fetchStakedAmount","fetchFees","account","amount","stakes","utils","formatEther","error","console","proposalFees","totalProposalFeesCollected","requestFees","totalRequestFeesCollected","joinDAO","txResponse","value","parseEther","wait","alert","addStake","withdrawStake","leaveDAO","walletConnectButtonStyle","backgroundColor","color","border","padding","borderRadius","cursor","boxShadow","fontWeight","fontSize","display","justifyContent","alignItems","marginBottom","flexDirection","flexWrap","flex","margin","e","target","marginRight"],"mappings":"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","sourcesContent":["// src/components/DAO.js\nimport React, { useContext, useEffect, useState } from 'react';\nimport { ethers } from 'ethers';\nimport { AppContext } from '../context/AppContext';\nimport OracleABI from '../utils/abis/Oracle_ABI.json';  // Ensure the path is correct and file name matches\n\nconst contractAddress = '0xE62a3277429B9F26C466D31157D50CaE97561e7C';\n\nconst DAO = () => {\n    const { currentAccount, networkProvider } = useContext(AppContext);\n    const [daoContract, setDaoContract] = useState(null);\n    const [stakedAmount, setStakedAmount] = useState('0');\n    const [additionalStake, setAdditionalStake] = useState('');\n    const [withdrawAmount, setWithdrawAmount] = useState('');\n    const [totalProposalFees, setTotalProposalFees] = useState('0');\n    const [totalRequestFees, setTotalRequestFees] = useState('0');\n\n    useEffect(() => {\n        if (networkProvider && currentAccount) {\n            const signer = networkProvider.getSigner();\n            const contract = new ethers.Contract(contractAddress, OracleABI, signer);\n            setDaoContract(contract);\n            fetchStakedAmount(contract, currentAccount);\n            fetchFees(contract);\n        }\n    }, [networkProvider, currentAccount]);\n\n    const fetchStakedAmount = async (contract, account) => {\n        try {\n            const amount = await contract.stakes(account);\n            setStakedAmount(ethers.utils.formatEther(amount));\n        } catch (error) {\n            console.error('Failed to fetch staked amount:', error);\n        }\n    };\n\n    const fetchFees = async (contract) => {\n        try {\n            const proposalFees = await contract.totalProposalFeesCollected();\n            const requestFees = await contract.totalRequestFeesCollected();\n            setTotalProposalFees(ethers.utils.formatEther(proposalFees));\n            setTotalRequestFees(ethers.utils.formatEther(requestFees));\n        } catch (error) {\n            console.error('Failed to fetch fees:', error);\n        }\n    };\n\n    const joinDAO = async () => {\n        if (!daoContract) return;\n\n        try {\n            const txResponse = await daoContract.joinDAO({ value: ethers.utils.parseEther(\"10\") });\n            await txResponse.wait();\n            alert('Successfully joined DAO!');\n            fetchStakedAmount(daoContract, currentAccount);\n            fetchFees(daoContract);\n        } catch (error) {\n            console.error('Failed to join DAO:', error);\n            alert('Error joining DAO');\n        }\n    };\n\n    const addStake = async () => {\n        if (!daoContract || !additionalStake) return;\n\n        try {\n            const txResponse = await daoContract.addStake({ value: ethers.utils.parseEther(additionalStake) });\n            await txResponse.wait();\n            alert('Successfully added stake!');\n            fetchStakedAmount(daoContract, currentAccount);\n            fetchFees(daoContract);\n            setAdditionalStake('');\n        } catch (error) {\n            console.error('Failed to add stake:', error);\n            alert('Error adding stake');\n        }\n    };\n\n    const withdrawStake = async () => {\n        if (!daoContract || !withdrawAmount) return;\n\n        try {\n            const txResponse = await daoContract.leaveDAO(ethers.utils.parseEther(withdrawAmount));\n            await txResponse.wait();\n            alert('Successfully withdrawn stake!');\n            fetchStakedAmount(daoContract, currentAccount);\n            setWithdrawAmount('');\n        } catch (error) {\n            console.error('Failed to withdraw stake:', error);\n            alert('Error withdrawing stake');\n        }\n    };\n\n    const walletConnectButtonStyle = {\n        backgroundColor: '#3b82f6',\n        color: 'white',\n        border: 'none',\n        padding: '10px 20px',\n        borderRadius: '12px',\n        cursor: 'pointer',\n        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n        fontWeight: '600',\n        fontSize: '16px',\n    };\n\n    return (\n        <div>\n            <div style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                marginBottom: '20px'\n            }}>\n                <h1>DAO</h1>\n                <button onClick={joinDAO} style={walletConnectButtonStyle}>\n                    Join DAO\n                </button>\n            </div>\n            <div style={{\n                display: 'flex',\n                flexDirection: 'row',\n                flexWrap: 'wrap',\n                justifyContent: 'space-around',\n            }}>\n                <div style={{\n                    backgroundColor: '#1a202c',\n                    color: 'white',\n                    padding: '20px',\n                    borderRadius: '8px',\n                    marginBottom: '10px',\n                    flex: '1 1 calc(33.333% - 20px)',\n                    margin: '10px',\n                }}>\n                    <p>Staked Amount: {stakedAmount} TPLANQ</p>\n                </div>\n                <div style={{\n                    backgroundColor: '#1a202c',\n                    color: 'white',\n                    padding: '20px',\n                    borderRadius: '8px',\n                    marginBottom: '10px',\n                    flex: '1 1 calc(33.333% - 20px)',\n                    margin: '10px',\n                }}>\n                    <p>Total Proposal Fees Collected: {totalProposalFees} TPLANQ</p>\n                </div>\n                <div style={{\n                    backgroundColor: '#1a202c',\n                    color: 'white',\n                    padding: '20px',\n                    borderRadius: '8px',\n                    marginBottom: '10px',\n                    flex: '1 1 calc(33.333% - 20px)',\n                    margin: '10px',\n                }}>\n                    <p>Total Request Fees Collected: {totalRequestFees} TPLANQ</p>\n                </div>\n            </div>\n            <div style={{\n                backgroundColor: '#1a202c',\n                padding: '20px',\n                borderRadius: '8px',\n                marginBottom: '10px',\n                display: 'flex',\n                justifyContent: 'space-between',\n            }}>\n                <input\n                    type=\"text\"\n                    value={additionalStake}\n                    onChange={e => setAdditionalStake(e.target.value)}\n                    placeholder=\"Amount to stake (TPLANQ)\"\n                    style={{ flex: '1', marginRight: '10px' }}\n                />\n                <button onClick={addStake}>Add Stake</button>\n            </div>\n            <div style={{\n                backgroundColor: '#1a202c',\n                padding: '20px',\n                borderRadius: '8px',\n                marginBottom: '10px',\n                display: 'flex',\n                justifyContent: 'space-between',\n            }}>\n                <input\n                    type=\"text\"\n                    value={withdrawAmount}\n                    onChange={e => setWithdrawAmount(e.target.value)}\n                    placeholder=\"Amount to unstake (TPLANQ)\"\n                    style={{ flex: '1', marginRight: '10px' }}\n                />\n                <button onClick={withdrawStake}>Withdraw Stake</button>\n            </div>\n        </div>\n    );\n};\n\nexport default DAO;\n"]},"metadata":{},"sourceType":"module"}